# PROJECT.md - 遊戯王カード検索アプリ

## プロジェクト概要
HTML/CSS/JavaScript（静的サイト）で作成した遊戯王カード検索アプリ
Google Spreadsheetで管理していた2,000件のカードデータをCSVで読み込み、高速検索を実現

## 技術スタック
- **フロントエンド**: HTML5, CSS3, vanilla JavaScript (ES6+)
- **データ形式**: CSV files
- **データ処理**: JavaScript (CSVパーサー)
- **検索機能**: リアルタイム検索、フィルタリング

## ファイル構成
```
yugioh-card-search/
├── data/
│   ├── card_master.csv    # カード基本情報（ID、種類、名前、パック情報）
│   ├── pack_master.csv    # パック情報（ID、パック名、出現内容）
│   └── query_results.csv  # 検索結果用（元SQLシート）
├── index.html             # メインページ
├── style.css             # スタイル（未作成）
├── script.js             # 検索ロジック（未作成）
└── PROJECT.md            # このファイル
```

## データ構造
### card_master.csv
```
#,種,カード名,パック
0001,1,13人目の埋葬者,"01,20,31,46"
0002,1,アクア・マドール,"01,29,46"
```
- **A列**: カードID（0001~）
- **B列**: 種類（1=モンスター、2=魔法？、3=罠？）
- **C列**: カード名
- **D列**: パック情報（カンマ区切り）

### pack_master.csv
```
#,パック名,出現内容,手に入れやすさ
01,LEGEND OF BLUE EYES WHITE DRAGON,最初から出現,1
02,METAL RAIDERS,最初から出現,1
```
- **A列**: パックID（01~）
- **B列**: パック名
- **C列**: 出現内容
- **D列**: 手に入れやすさ

## 元のQUERY関数の動作
```
=QUERY(card!A:D,"select * where B matches '"&JOIN("|",2,3,4,5)&"' and D contains '"&TO_TEXT(B2)&"' order by B,A")
```

**検索ロジック**:
1. **パック選択**: B2セルのパックIDでフィルタリング
2. **種類フィルター**: 2,3,4,5行の値で種類を限定
3. **並び順**: 種類→カードIDでソート

## 実装予定機能
- [ ] CSVファイル読み込み機能
- [ ] パック選択プルダウン（pack_master.csvから生成）
- [ ] カード種類フィルター（チェックボックス）
- [ ] カード名検索（部分一致、リアルタイム）
- [ ] 検索結果表示（テーブル形式）
- [ ] 逆引き機能（カード名→パック名）
- [ ] 結果の並び替え機能
- [ ] レスポンシブデザイン

## 検索機能の詳細
### 1. パック選択機能
- pack_master.csvからプルダウンメニューを動的生成
- 選択したパック名に対応するパックIDを取得
- 該当パックを含むカードのみを表示

### 2. カード種類フィルター
- 種類1: モンスター
- 種類2: 魔法（推定）
- 種類3: 罠（推定）
- 複数選択可能（チェックボックス）

### 3. カード名検索
- 部分一致検索
- リアルタイム検索（入力中に結果更新）
- 大文字小文字区別なし

### 4. 逆引き機能
- カード名をクリック→そのカードが含まれるパック一覧を表示
- パック情報からpack_master.csvを参照してパック名を取得

## 学習目標
- CSV データの JavaScript での処理方法
- リアルタイム検索の実装
- 配列操作とフィルタリング
- DOM操作による動的UI更新
- 複数データソースの連携処理

## 技術的な工夫点
- データ全体をメモリに読み込み、高速検索を実現
- 正規表現を使った柔軟な検索
- 元のGoogle Spreadsheet QUERY関数の動作を完全再現
- パフォーマンスを考慮したデータ構造設計

## 注意事項
- 静的サイトのため、データ更新は手動でCSVファイルを置き換え
- ブラウザの互換性に配慮（ES6+対応ブラウザ）
- 2,000件のデータを一度に処理するため、メモリ使用量に注意